{"version":3,"sources":["@wordpress/editor/src/store/actions.js"],"names":["setupEditor","post","edits","template","dispatch","setupEditorState","isNewPost","status","content","raw","blocks","resetEditorBlocks","__unstableShouldCreateUndoLevel","Object","values","some","key","edit","editPost","__experimentalTearDownEditor","type","resetPost","since","version","alternative","updatePost","options","select","registry","id","getCurrentPost","coreStore","editEntityRecord","savePost","isEditedPostSaveable","getEditedPostContent","isAutosave","undoIgnore","previousRecord","getEntityRecordNonTransientEdits","saveEntityRecord","error","getLastEntitySaveError","args","length","noticesStore","createErrorNotice","updatedRecord","previousPost","postType","resolveSelect","getPostType","createSuccessNotice","blockEditorStore","__unstableMarkLastChangeAsPersistent","refreshPost","trashPost","postTypeSlug","getCurrentPostType","removeNotice","TRASH_POST_NOTICE_ID","path","rest_base","method","autosave","local","isPostNew","isEditedPostNew","title","getEditedPostAttribute","excerpt","redo","undo","createUndoLevel","updatePostLock","lock","enablePublishSidebar","preferencesStore","set","disablePublishSidebar","lockPostSaving","lockName","unlockPostSaving","lockPostAutosaving","unlockPostAutosaving","selection","noChange","getEditedEntityRecord","__unstableCreateUndoLevel","blocksForSerialization","updateEditorSettings","settings","getBlockEditorAction","name","resetBlocks","receiveBlocks","updateBlock","updateBlockAttributes","selectBlock","startMultiSelect","stopMultiSelect","multiSelect","clearSelectedBlock","toggleSelection","replaceBlocks","replaceBlock","moveBlocksDown","moveBlocksUp","moveBlockToPosition","insertBlock","insertBlocks","showInsertionPoint","hideInsertionPoint","setTemplateValidity","synchronizeTemplate","mergeBlocks","removeBlocks","removeBlock","toggleBlockMode","startTyping","stopTyping","enterFormattedText","exitFormattedText","insertDefaultBlock","updateBlockListSettings"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { has } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport deprecated from '@wordpress/deprecated';\nimport {\n\tparse,\n\tsynchronizeBlocksWithTemplate,\n\t__unstableSerializeAndClean,\n} from '@wordpress/blocks';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { TRASH_POST_NOTICE_ID } from './constants';\nimport { localAutosaveSet } from './local-autosave';\nimport {\n\tgetNotificationArgumentsForSaveSuccess,\n\tgetNotificationArgumentsForSaveFail,\n\tgetNotificationArgumentsForTrashFail,\n} from './utils/notice-builder';\n\n/**\n * Returns an action generator used in signalling that editor has initialized with\n * the specified post object and editor settings.\n *\n * @param {Object} post     Post object.\n * @param {Object} edits    Initial edited attributes object.\n * @param {Array?} template Block Template.\n */\nexport const setupEditor = ( post, edits, template ) => ( { dispatch } ) => {\n\tdispatch.setupEditorState( post );\n\t// Apply a template for new posts only, if exists.\n\tconst isNewPost = post.status === 'auto-draft';\n\tif ( isNewPost && template ) {\n\t\t// In order to ensure maximum of a single parse during setup, edits are\n\t\t// included as part of editor setup action. Assume edited content as\n\t\t// canonical if provided, falling back to post.\n\t\tlet content;\n\t\tif ( has( edits, [ 'content' ] ) ) {\n\t\t\tcontent = edits.content;\n\t\t} else {\n\t\t\tcontent = post.content.raw;\n\t\t}\n\t\tlet blocks = parse( content );\n\t\tblocks = synchronizeBlocksWithTemplate( blocks, template );\n\t\tdispatch.resetEditorBlocks( blocks, {\n\t\t\t__unstableShouldCreateUndoLevel: false,\n\t\t} );\n\t}\n\tif (\n\t\tedits &&\n\t\tObject.values( edits ).some(\n\t\t\t( [ key, edit ] ) => edit !== ( post[ key ]?.raw ?? post[ key ] )\n\t\t)\n\t) {\n\t\tdispatch.editPost( edits );\n\t}\n};\n\n/**\n * Returns an action object signalling that the editor is being destroyed and\n * that any necessary state or side-effect cleanup should occur.\n *\n * @return {Object} Action object.\n */\nexport function __experimentalTearDownEditor() {\n\treturn { type: 'TEAR_DOWN_EDITOR' };\n}\n\n/**\n * Returns an action object used in signalling that the latest version of the\n * post has been received, either by initialization or save.\n *\n * @deprecated Since WordPress 6.0.\n */\nexport function resetPost() {\n\tdeprecated( \"wp.data.dispatch( 'core/editor' ).resetPost\", {\n\t\tsince: '6.0',\n\t\tversion: '6.3',\n\t\talternative: 'Initialize the editor with the setupEditorState action',\n\t} );\n\treturn { type: 'DO_NOTHING' };\n}\n\n/**\n * Returns an action object used in signalling that a patch of updates for the\n * latest version of the post have been received.\n *\n * @return {Object} Action object.\n * @deprecated since Gutenberg 9.7.0.\n */\nexport function updatePost() {\n\tdeprecated( \"wp.data.dispatch( 'core/editor' ).updatePost\", {\n\t\tsince: '5.7',\n\t\talternative: 'Use the core entities store instead',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Returns an action object used to setup the editor state when first opening\n * an editor.\n *\n * @param {Object} post Post object.\n *\n * @return {Object} Action object.\n */\nexport function setupEditorState( post ) {\n\treturn {\n\t\ttype: 'SETUP_EDITOR_STATE',\n\t\tpost,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that attributes of the post have\n * been edited.\n *\n * @param {Object} edits   Post attributes to edit.\n * @param {Object} options Options for the edit.\n */\nexport const editPost = ( edits, options ) => ( { select, registry } ) => {\n\tconst { id, type } = select.getCurrentPost();\n\tregistry\n\t\t.dispatch( coreStore )\n\t\t.editEntityRecord( 'postType', type, id, edits, options );\n};\n\n/**\n * Action for saving the current post in the editor.\n *\n * @param {Object} options\n */\nexport const savePost = ( options = {} ) => async ( {\n\tselect,\n\tdispatch,\n\tregistry,\n} ) => {\n\tif ( ! select.isEditedPostSaveable() ) {\n\t\treturn;\n\t}\n\n\tconst content = select.getEditedPostContent();\n\n\tif ( ! options.isAutosave ) {\n\t\tdispatch.editPost( { content }, { undoIgnore: true } );\n\t}\n\n\tconst previousRecord = select.getCurrentPost();\n\tconst edits = {\n\t\tid: previousRecord.id,\n\t\t...registry\n\t\t\t.select( coreStore )\n\t\t\t.getEntityRecordNonTransientEdits(\n\t\t\t\t'postType',\n\t\t\t\tpreviousRecord.type,\n\t\t\t\tpreviousRecord.id\n\t\t\t),\n\t\tcontent,\n\t};\n\tdispatch( { type: 'REQUEST_POST_UPDATE_START', options } );\n\tawait registry\n\t\t.dispatch( coreStore )\n\t\t.saveEntityRecord( 'postType', previousRecord.type, edits, options );\n\tdispatch( { type: 'REQUEST_POST_UPDATE_FINISH', options } );\n\n\tconst error = registry\n\t\t.select( coreStore )\n\t\t.getLastEntitySaveError(\n\t\t\t'postType',\n\t\t\tpreviousRecord.type,\n\t\t\tpreviousRecord.id\n\t\t);\n\tif ( error ) {\n\t\tconst args = getNotificationArgumentsForSaveFail( {\n\t\t\tpost: previousRecord,\n\t\t\tedits,\n\t\t\terror,\n\t\t} );\n\t\tif ( args.length ) {\n\t\t\tregistry.dispatch( noticesStore ).createErrorNotice( ...args );\n\t\t}\n\t} else {\n\t\tconst updatedRecord = select.getCurrentPost();\n\t\tconst args = getNotificationArgumentsForSaveSuccess( {\n\t\t\tpreviousPost: previousRecord,\n\t\t\tpost: updatedRecord,\n\t\t\tpostType: await registry\n\t\t\t\t.resolveSelect( coreStore )\n\t\t\t\t.getPostType( updatedRecord.type ),\n\t\t\toptions,\n\t\t} );\n\t\tif ( args.length ) {\n\t\t\tregistry.dispatch( noticesStore ).createSuccessNotice( ...args );\n\t\t}\n\t\t// Make sure that any edits after saving create an undo level and are\n\t\t// considered for change detection.\n\t\tif ( ! options.isAutosave ) {\n\t\t\tregistry\n\t\t\t\t.dispatch( blockEditorStore )\n\t\t\t\t.__unstableMarkLastChangeAsPersistent();\n\t\t}\n\t}\n};\n\n/**\n * Action for refreshing the current post.\n *\n * @deprecated Since WordPress 6.0.\n */\nexport function refreshPost() {\n\tdeprecated( \"wp.data.dispatch( 'core/editor' ).refreshPost\", {\n\t\tsince: '6.0',\n\t\tversion: '6.3',\n\t\talternative: 'Use the core entities store instead',\n\t} );\n\treturn { type: 'DO_NOTHING' };\n}\n\n/**\n * Action for trashing the current post in the editor.\n */\nexport const trashPost = () => async ( { select, dispatch, registry } ) => {\n\tconst postTypeSlug = select.getCurrentPostType();\n\tconst postType = await registry\n\t\t.resolveSelect( coreStore )\n\t\t.getPostType( postTypeSlug );\n\tregistry.dispatch( noticesStore ).removeNotice( TRASH_POST_NOTICE_ID );\n\ttry {\n\t\tconst post = select.getCurrentPost();\n\t\tawait apiFetch( {\n\t\t\tpath: `/wp/v2/${ postType.rest_base }/${ post.id }`,\n\t\t\tmethod: 'DELETE',\n\t\t} );\n\n\t\tawait dispatch.savePost();\n\t} catch ( error ) {\n\t\tregistry\n\t\t\t.dispatch( noticesStore )\n\t\t\t.createErrorNotice(\n\t\t\t\t...getNotificationArgumentsForTrashFail( { error } )\n\t\t\t);\n\t}\n};\n\n/**\n * Action that autosaves the current post.  This\n * includes server-side autosaving (default) and client-side (a.k.a. local)\n * autosaving (e.g. on the Web, the post might be committed to Session\n * Storage).\n *\n * @param {Object?} options Extra flags to identify the autosave.\n */\nexport const autosave = ( { local = false, ...options } = {} ) => async ( {\n\tselect,\n\tdispatch,\n} ) => {\n\tif ( local ) {\n\t\tconst post = select.getCurrentPost();\n\t\tconst isPostNew = select.isEditedPostNew();\n\t\tconst title = select.getEditedPostAttribute( 'title' );\n\t\tconst content = select.getEditedPostAttribute( 'content' );\n\t\tconst excerpt = select.getEditedPostAttribute( 'excerpt' );\n\t\tlocalAutosaveSet( post.id, isPostNew, title, content, excerpt );\n\t} else {\n\t\tawait dispatch.savePost( { isAutosave: true, ...options } );\n\t}\n};\n\n/**\n * Action that restores last popped state in undo history.\n */\nexport const redo = () => ( { registry } ) => {\n\tregistry.dispatch( coreStore ).redo();\n};\n\n/**\n * Action that pops a record from undo history and undoes the edit.\n */\nexport const undo = () => ( { registry } ) => {\n\tregistry.dispatch( coreStore ).undo();\n};\n\n/**\n * Action that creates an undo history record.\n *\n * @deprecated Since WordPress 6.0\n */\nexport function createUndoLevel() {\n\tdeprecated( \"wp.data.dispatch( 'core/editor' ).createUndoLevel\", {\n\t\tsince: '6.0',\n\t\tversion: '6.3',\n\t\talternative: 'Use the core entities store instead',\n\t} );\n\treturn { type: 'DO_NOTHING' };\n}\n\n/**\n * Action that locks the editor.\n *\n * @param {Object} lock Details about the post lock status, user, and nonce.\n * @return {Object} Action object.\n */\nexport function updatePostLock( lock ) {\n\treturn {\n\t\ttype: 'UPDATE_POST_LOCK',\n\t\tlock,\n\t};\n}\n\n/**\n * Enable the publish sidebar.\n */\nexport const enablePublishSidebar = () => ( { registry } ) => {\n\tregistry\n\t\t.dispatch( preferencesStore )\n\t\t.set( 'core/edit-post', 'isPublishSidebarEnabled', true );\n};\n\n/**\n * Disables the publish sidebar.\n */\nexport const disablePublishSidebar = () => ( { registry } ) => {\n\tregistry\n\t\t.dispatch( preferencesStore )\n\t\t.set( 'core/edit-post', 'isPublishSidebarEnabled', false );\n};\n\n/**\n * Action that locks post saving.\n *\n * @param {string} lockName The lock name.\n *\n * @example\n * ```\n * const { subscribe } = wp.data;\n *\n * const initialPostStatus = wp.data.select( 'core/editor' ).getEditedPostAttribute( 'status' );\n *\n * // Only allow publishing posts that are set to a future date.\n * if ( 'publish' !== initialPostStatus ) {\n *\n * \t// Track locking.\n * \tlet locked = false;\n *\n * \t// Watch for the publish event.\n * \tlet unssubscribe = subscribe( () => {\n * \t\tconst currentPostStatus = wp.data.select( 'core/editor' ).getEditedPostAttribute( 'status' );\n * \t\tif ( 'publish' !== currentPostStatus ) {\n *\n * \t\t\t// Compare the post date to the current date, lock the post if the date isn't in the future.\n * \t\t\tconst postDate = new Date( wp.data.select( 'core/editor' ).getEditedPostAttribute( 'date' ) );\n * \t\t\tconst currentDate = new Date();\n * \t\t\tif ( postDate.getTime() <= currentDate.getTime() ) {\n * \t\t\t\tif ( ! locked ) {\n * \t\t\t\t\tlocked = true;\n * \t\t\t\t\twp.data.dispatch( 'core/editor' ).lockPostSaving( 'futurelock' );\n * \t\t\t\t}\n * \t\t\t} else {\n * \t\t\t\tif ( locked ) {\n * \t\t\t\t\tlocked = false;\n * \t\t\t\t\twp.data.dispatch( 'core/editor' ).unlockPostSaving( 'futurelock' );\n * \t\t\t\t}\n * \t\t\t}\n * \t\t}\n * \t} );\n * }\n * ```\n *\n * @return {Object} Action object\n */\nexport function lockPostSaving( lockName ) {\n\treturn {\n\t\ttype: 'LOCK_POST_SAVING',\n\t\tlockName,\n\t};\n}\n\n/**\n * Action that unlocks post saving.\n *\n * @param {string} lockName The lock name.\n *\n * @example\n * ```\n * // Unlock post saving with the lock key `mylock`:\n * wp.data.dispatch( 'core/editor' ).unlockPostSaving( 'mylock' );\n * ```\n *\n * @return {Object} Action object\n */\nexport function unlockPostSaving( lockName ) {\n\treturn {\n\t\ttype: 'UNLOCK_POST_SAVING',\n\t\tlockName,\n\t};\n}\n\n/**\n * Action that locks post autosaving.\n *\n * @param {string} lockName The lock name.\n *\n * @example\n * ```\n * // Lock post autosaving with the lock key `mylock`:\n * wp.data.dispatch( 'core/editor' ).lockPostAutosaving( 'mylock' );\n * ```\n *\n * @return {Object} Action object\n */\nexport function lockPostAutosaving( lockName ) {\n\treturn {\n\t\ttype: 'LOCK_POST_AUTOSAVING',\n\t\tlockName,\n\t};\n}\n\n/**\n * Action that unlocks post autosaving.\n *\n * @param {string} lockName The lock name.\n *\n * @example\n * ```\n * // Unlock post saving with the lock key `mylock`:\n * wp.data.dispatch( 'core/editor' ).unlockPostAutosaving( 'mylock' );\n * ```\n *\n * @return {Object} Action object\n */\nexport function unlockPostAutosaving( lockName ) {\n\treturn {\n\t\ttype: 'UNLOCK_POST_AUTOSAVING',\n\t\tlockName,\n\t};\n}\n\n/**\n * Returns an action object used to signal that the blocks have been updated.\n *\n * @param {Array}   blocks  Block Array.\n * @param {?Object} options Optional options.\n */\nexport const resetEditorBlocks = ( blocks, options = {} ) => ( {\n\tselect,\n\tdispatch,\n\tregistry,\n} ) => {\n\tconst { __unstableShouldCreateUndoLevel, selection } = options;\n\tconst edits = { blocks, selection };\n\n\tif ( __unstableShouldCreateUndoLevel !== false ) {\n\t\tconst { id, type } = select.getCurrentPost();\n\t\tconst noChange =\n\t\t\tregistry\n\t\t\t\t.select( coreStore )\n\t\t\t\t.getEditedEntityRecord( 'postType', type, id ).blocks ===\n\t\t\tedits.blocks;\n\t\tif ( noChange ) {\n\t\t\tregistry\n\t\t\t\t.dispatch( coreStore )\n\t\t\t\t.__unstableCreateUndoLevel( 'postType', type, id );\n\t\t\treturn;\n\t\t}\n\n\t\t// We create a new function here on every persistent edit\n\t\t// to make sure the edit makes the post dirty and creates\n\t\t// a new undo level.\n\t\tedits.content = ( { blocks: blocksForSerialization = [] } ) =>\n\t\t\t__unstableSerializeAndClean( blocksForSerialization );\n\t}\n\n\tdispatch.editPost( edits );\n};\n\n/*\n * Returns an action object used in signalling that the post editor settings have been updated.\n *\n * @param {Object} settings Updated settings\n *\n * @return {Object} Action object\n */\nexport function updateEditorSettings( settings ) {\n\treturn {\n\t\ttype: 'UPDATE_EDITOR_SETTINGS',\n\t\tsettings,\n\t};\n}\n\n/**\n * Backward compatibility\n */\n\nconst getBlockEditorAction = ( name ) => ( ...args ) => ( { registry } ) => {\n\tdeprecated( \"`wp.data.dispatch( 'core/editor' ).\" + name + '`', {\n\t\tsince: '5.3',\n\t\talternative: \"`wp.data.dispatch( 'core/block-editor' ).\" + name + '`',\n\t\tversion: '6.2',\n\t} );\n\tregistry.dispatch( blockEditorStore )[ name ]( ...args );\n};\n\n/**\n * @see resetBlocks in core/block-editor store.\n */\nexport const resetBlocks = getBlockEditorAction( 'resetBlocks' );\n\n/**\n * @see receiveBlocks in core/block-editor store.\n */\nexport const receiveBlocks = getBlockEditorAction( 'receiveBlocks' );\n\n/**\n * @see updateBlock in core/block-editor store.\n */\nexport const updateBlock = getBlockEditorAction( 'updateBlock' );\n\n/**\n * @see updateBlockAttributes in core/block-editor store.\n */\nexport const updateBlockAttributes = getBlockEditorAction(\n\t'updateBlockAttributes'\n);\n\n/**\n * @see selectBlock in core/block-editor store.\n */\nexport const selectBlock = getBlockEditorAction( 'selectBlock' );\n\n/**\n * @see startMultiSelect in core/block-editor store.\n */\nexport const startMultiSelect = getBlockEditorAction( 'startMultiSelect' );\n\n/**\n * @see stopMultiSelect in core/block-editor store.\n */\nexport const stopMultiSelect = getBlockEditorAction( 'stopMultiSelect' );\n\n/**\n * @see multiSelect in core/block-editor store.\n */\nexport const multiSelect = getBlockEditorAction( 'multiSelect' );\n\n/**\n * @see clearSelectedBlock in core/block-editor store.\n */\nexport const clearSelectedBlock = getBlockEditorAction( 'clearSelectedBlock' );\n\n/**\n * @see toggleSelection in core/block-editor store.\n */\nexport const toggleSelection = getBlockEditorAction( 'toggleSelection' );\n\n/**\n * @see replaceBlocks in core/block-editor store.\n */\nexport const replaceBlocks = getBlockEditorAction( 'replaceBlocks' );\n\n/**\n * @see replaceBlock in core/block-editor store.\n */\nexport const replaceBlock = getBlockEditorAction( 'replaceBlock' );\n\n/**\n * @see moveBlocksDown in core/block-editor store.\n */\nexport const moveBlocksDown = getBlockEditorAction( 'moveBlocksDown' );\n\n/**\n * @see moveBlocksUp in core/block-editor store.\n */\nexport const moveBlocksUp = getBlockEditorAction( 'moveBlocksUp' );\n\n/**\n * @see moveBlockToPosition in core/block-editor store.\n */\nexport const moveBlockToPosition = getBlockEditorAction(\n\t'moveBlockToPosition'\n);\n\n/**\n * @see insertBlock in core/block-editor store.\n */\nexport const insertBlock = getBlockEditorAction( 'insertBlock' );\n\n/**\n * @see insertBlocks in core/block-editor store.\n */\nexport const insertBlocks = getBlockEditorAction( 'insertBlocks' );\n\n/**\n * @see showInsertionPoint in core/block-editor store.\n */\nexport const showInsertionPoint = getBlockEditorAction( 'showInsertionPoint' );\n\n/**\n * @see hideInsertionPoint in core/block-editor store.\n */\nexport const hideInsertionPoint = getBlockEditorAction( 'hideInsertionPoint' );\n\n/**\n * @see setTemplateValidity in core/block-editor store.\n */\nexport const setTemplateValidity = getBlockEditorAction(\n\t'setTemplateValidity'\n);\n\n/**\n * @see synchronizeTemplate in core/block-editor store.\n */\nexport const synchronizeTemplate = getBlockEditorAction(\n\t'synchronizeTemplate'\n);\n\n/**\n * @see mergeBlocks in core/block-editor store.\n */\nexport const mergeBlocks = getBlockEditorAction( 'mergeBlocks' );\n\n/**\n * @see removeBlocks in core/block-editor store.\n */\nexport const removeBlocks = getBlockEditorAction( 'removeBlocks' );\n\n/**\n * @see removeBlock in core/block-editor store.\n */\nexport const removeBlock = getBlockEditorAction( 'removeBlock' );\n\n/**\n * @see toggleBlockMode in core/block-editor store.\n */\nexport const toggleBlockMode = getBlockEditorAction( 'toggleBlockMode' );\n\n/**\n * @see startTyping in core/block-editor store.\n */\nexport const startTyping = getBlockEditorAction( 'startTyping' );\n\n/**\n * @see stopTyping in core/block-editor store.\n */\nexport const stopTyping = getBlockEditorAction( 'stopTyping' );\n\n/**\n * @see enterFormattedText in core/block-editor store.\n */\nexport const enterFormattedText = getBlockEditorAction( 'enterFormattedText' );\n\n/**\n * @see exitFormattedText in core/block-editor store.\n */\nexport const exitFormattedText = getBlockEditorAction( 'exitFormattedText' );\n\n/**\n * @see insertDefaultBlock in core/block-editor store.\n */\nexport const insertDefaultBlock = getBlockEditorAction( 'insertDefaultBlock' );\n\n/**\n * @see updateBlockListSettings in core/block-editor store.\n */\nexport const updateBlockListSettings = getBlockEditorAction(\n\t'updateBlockListSettings'\n);\n"]}